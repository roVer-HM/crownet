[General]
network = crownet.simulations.vamCluster.World
image-path=../../images
print-undisposed = true

[Config BaseNR]
description = "Do not run - NR configurations"

**.hasGlobalMap = true

**.identiyRegistryModule = "identiyRegistry"

**.configurator.config = xmldoc("xmlConfigs/ipv4.xml")
**.fbPeriod = 40
**.amcType = "NRAmc"
**.pilotMode = "ROBUST_CQI" 
**.targetBler = 0.01
**.blerShift = 5
**.cellularNic.LteChannelModelType = "NRChannelModel"
**.ueTxPower = 28
**.eNodeBTxPower = 30
**.usePreconfiguredTxParams = true
**.amcMode = "D2D"
**.hasRNISupport = false
**.enableD2DCqiReporting = false
**.d2dCqi = 7

*.carrierAggregation.numComponentCarriers = 1
*.carrierAggregation.componentCarrier[0].numBands =  10

*.gNodeB*.cellInfo.broadcastMessageInterval = 0.5s
*.gNodeB*.cellularNic.numCarriers = 1
*.gNodeB*.cellularNic.channelModel[0].componentCarrierIndex = 0
*.gNodeB*.mobility.initFromDisplayString = true
*.gNodeB*.macCellId = 1
*.gNodeB*.macNodeId = 1

**.tcp.typename = "Tcp"
**.tcp.advertisedWindow = 65535
**.tcp.tcpAlgorithmClass = "TcpReno"
**.tcp.sackSupport = true   

[Config BaseSumo]
description = "Do not run - Sumo + Traci configurations"

*.traci.core.typename = "Core"
*.traci.core.version = -1
*.traci.core.selfStopping = false
*.traci.launcher.typename = "SumoLauncher"
*.traci.launcher.hostname = "sumo"
*.traci.launcher.port = 9999
*.traci.mapper.typename = "BasicModuleMapper"
*.traci.mapper.personType = "crownet.nodes.ApplicationLayerPedestrian"
*.traci.mapper.vehicleType = "crownet.nodes.ApplicationLayerVehicle"
*.traci.nodes.typename = "SumoCombinedNodeManager"
*.traci.nodes.personSinkModule = ".mobility"
*.traci.nodes.vehicleSinkModule = ".mobility"
*.traci.nodes.personNode = "pNode"
*.traci.nodes.vehicleNode = "vNode"

**.ignoreVehicle = false
**.ignorePersons = false

*.*visualization.sceneVisualizer.typename = "SumoSceneCanvasVisualizer"
*.*visualization.sceneVisualizer.zIndex = -1
*.*visualization.sceneVisualizer.coordinateSystemModule = "coordConverter"
*.*visualization.physicalEnvironmentVisualizer.typename = "PhysicalEnvironmentCanvasVisualizer"
*.*visualization.*.typename = ""

**.coordConverter.typename = "OsgCoordConverterSumo"
**.coordConverterModule = "coordConverter"

[Config BaseVadere]
description = "Do not run - Base vadere configuration"
*.traci.core.typename = "VadereCore"
*.traci.core.version = -1
*.traci.core.selfStopping = false
*.traci.launcher.typename = "VadereLauncher"
*.traci.launcher.hostname = "vadere"
*.traci.launcher.port = 9998
*.traci.mapper.typename = "VadereModuleMapper"
*.traci.mapper.personType = "crownet.nodes.ApplicationLayerPedestrian"
*.traci.nodes.typename = "VadereNodeManager"
*.traci.nodes.personSinkModule = ".mobility"
*.traci.nodes.vehicleSinkModule = ".mobility"
*.traci.nodes.personNode = "pNode"
*.traci.subscriptions.typename = "VadereSubscriptionManager"
*.*Node[*].mobility.visualRepresentation = "^"
*.coordConverter.typename = "OsgCoordConverterVadere"
*.coordConverter.coreModule ="traci.core"
**.useVadere = true
*.gloablDensityMap.useSignalMapInit = true

*.coordConverter.typename = "OsgCoordConverterVadere"
*.*visualization.sceneVisualizer.typename = "SumoSceneCanvasVisualizer"

[Config BaseNode]
description = "Do not run - Base node configuration"

*.*Node[*].useNR = true
*.*Node[*].cellularNic.numCarriers = 1
*.*Node[*].cellularNic.nrChannelModel[0].componentCarrierIndex = 0
*.*Node[*].nicType = "NRNicUe"
*.*Node[*].cellularNic.mac.amcMode = "D2D"
*.*Node[*].useArtery = true
*.*Node[*].hasWlan = false
*.*Node[*].mobility.visualRepresentation = "^"
*.*Node[*].nrMacCellId = 1
*.*Node[*].nrMacNodeId = 0
*.*Node[*].nrMasterId = 1
*.*Node[*].macCellId = 1
*.*Node[*].masterId = 1
*.*Node[*].middleware.updateInterval = 0.1s # application trigger
*.*Node[*].middleware.datetime = "2022-11-17 14:19:00"
*.*Node[*].middleware.services = xmldoc("xmlConfigs/services.xml")
*.*Node[*].middleware.VaService.*.result-recording-modes = all
*.*Node[*].middleware.CaService.*.result-recording-modes = all

[Config ScenarioBase]
description = "Do not run - Base for scenarios"
extends = BaseNR, BaseNode

[Config BaseLuitpoldpark]
extends = BaseSumo
description = "Do not run - Base luitpoldpark map"

*.traci.launcher.sumoCfgBase = absFilePath("sumo/luitpoldpark/osm.sumocfg")
*.coordConverter.netFile = xmldoc("sumo/luitpoldpark/osm.net.xml")
*.visualization.sceneVisualizer.mapFile = xmldoc("sumo/luitpoldpark/osm.poly.xml")
*.net_visualization.sceneVisualizer.mapFile = xmldoc("sumo/luitpoldpark/osm.net.xml")

*.pNode[*].mobility.typename = "artery.inet.PersonMobility"
*.pNode[*].vanetza.position.typename = "PersonPositionProvider"
*.pNode[*].middleware.DenService.useCases = xml("<usecases/>")

*.vNode[*].vanetza.position.typename = "VehiclePositionProvider"
*.vNode[*].mobility.typename = "artery.inet.VehicleMobility"
*.vNode[*].middleware.DenService.useCases = xmldoc("xmlConfigs/den-use-cases.xml")

[Config BaseLothstrasseSumo]
extends = BaseSumo
description = "Do not run - Base lothstrasse map"

*.traci.launcher.sumoCfgBase = absFilePath("combined/lothstrasse/sumo/osm.sumocfg")
*.coordConverter.netFile = xmldoc("combined/lothstrasse/sumo/osm.net.xml")
*.visualization.sceneVisualizer.mapFile = xmldoc("combined/lothstrasse/sumo/osm.poly.xml")
*.net_visualization.sceneVisualizer.mapFile = xmldoc("combined/lothstrasse/sumo/osm.net.xml")

*.pNode[*].mobility.typename = "artery.inet.PersonMobility"
*.pNode[*].vanetza.position.typename = "PersonPositionProvider"
*.pNode[*].middleware.DenService.useCases = xml("<usecases/>")

*.vNode[*].vanetza.position.typename = "VehiclePositionProvider"
*.vNode[*].mobility.typename = "artery.inet.VehicleMobility"
*.vNode[*].middleware.DenService.useCases = xmldoc("xmlConfigs/den-use-cases.xml")

[Config BaseVadereTestScenario]
extends = BaseVadere
description = "Do not run - Base vadere test scenario"
**.vadereScenarioPath = "vadere/scenarios/mf_001_base_96.scenario"
*.physicalEnvironment.config = xmldoc("vadere/scenarios/mf_001_base_env.xml")
*.visualization.sceneVisualizer.typename = ""
*.net_visualization.typename = ""
*.visualization.sceneVisualizer.typename = "OpenStreetMapSceneCanvasVisualizer"
*.visualization.sceneVisualizer.mapFile = xmldoc("sumo/munich_clean.osm")
*.visualization.sceneVisualizer.coordinateSystemModule = "coordConverter"
*.visualization.sceneVisualizer.zIndex = -1

*.*Node[*].useVadere = true
*.pNode[*].middleware.DenService.useCases = xml("<usecases/>")


[Config test_scenario]
description = "Test Scenario"
extends = ScenarioBase, BaseLothstrasseSumo
sim-time-limit = 120s





